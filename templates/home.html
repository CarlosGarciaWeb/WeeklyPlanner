{% extends 'layout.html' %}

{% block content %}

<div class="planner">
<section class="dates">
    {% for date in date_range(selected_date) %}
    <li class="date__list">
    <a href="{{ url_for('home', date=date) }}" class="dates__link {{ 'dates__link--current' if loop.index0 == 3 else '' }} {{ 'dates__link--today' if date == todays_day else '' }}">
        <time class="date">
            <span class="date__span">{{ date.strftime('%b') }}</span>
            <span class="date__span">{{ date.strftime('%a') }}</span>
            <span class="date__span">{{ date.strftime('%d') }}</span>
        </time>
    </a>
    </li>
    {% endfor %}
</section>
<section class="task">
    {% if task_list %}
    {% for taskName, taskLength in task_list %}
    <div class="tasks">
        <p class="task__length">{{ taskLength }} {{ "hours" if taskLength > 1 else "hour"}}</p>
        <p class="task__name">{{ taskName | title }}</p>
        <svg class="task__icon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1024" zoomAndPan="magnify" viewBox="0 0 768 767.999994" height="1024" preserveAspectRatio="xMidYMid meet" version="1.0"><defs><clipPath id="3824f83532"><path d="M 307.050781 291.039062 L 455.320312 291.039062 L 455.320312 494.90625 L 307.050781 494.90625 Z M 307.050781 291.039062 " clip-rule="nonzero"/></clipPath><clipPath id="2f622ece43"><path d="M 396.648438 289 L 544.917969 289 L 544.917969 436.804688 L 396.648438 436.804688 Z M 396.648438 289 " clip-rule="nonzero"/></clipPath></defs><g clip-path="url(#3824f83532)"><path fill="#3d3838" d="M 455.320312 306.71875 C 455.320312 298.0625 448.289062 291.042969 439.617188 291.042969 L 322.753906 291.042969 C 314.082031 291.042969 307.050781 298.0625 307.050781 306.71875 L 307.050781 479.222656 C 307.050781 487.882812 314.082031 494.902344 322.753906 494.902344 L 439.621094 494.902344 C 448.289062 494.902344 455.320312 487.882812 455.320312 479.222656 Z M 433.832031 447.691406 L 326.390625 447.691406 L 326.390625 436.964844 L 433.832031 436.964844 Z M 433.832031 417.652344 L 326.390625 417.652344 L 326.390625 409.066406 L 433.832031 409.066406 Z M 433.832031 389.753906 L 326.390625 389.753906 L 326.390625 379.023438 L 433.832031 379.023438 Z M 433.832031 359.710938 L 326.390625 359.710938 L 326.390625 348.980469 L 433.832031 348.980469 Z M 433.832031 329.667969 L 326.390625 329.667969 L 326.390625 318.9375 L 433.832031 318.9375 Z M 433.832031 329.667969 " fill-opacity="1" fill-rule="nonzero"/></g><g clip-path="url(#2f622ece43)"><path fill="#3d3838" d="M 396.648438 406.085938 L 396.648438 436.804688 L 427.367188 436.804688 L 518.007812 346.164062 L 487.289062 315.445312 Z M 541.679688 322.492188 C 544.875 319.296875 544.875 314.09375 541.679688 310.902344 L 522.554688 291.773438 C 519.359375 288.578125 514.15625 288.578125 510.960938 291.773438 L 495.972656 306.765625 L 526.691406 337.480469 Z M 541.679688 322.492188 " fill-opacity="1" fill-rule="nonzero"/></g></svg>
    </div>
    {% endfor %}
    {% else %}
    <div class="tasks">
        <h3 class="task__name">No available tasks for: {{selected_date.strftime("%b %d, %Y")}}</h3>
    </div>
    {% endif %}
</section>
</div>

<section class="planning">
{% if preview %}

    <h3 class="planning__date">{{ "Tomorrow's tasks: " if selected_date == todays_day else "Today's tasks: " }}</h3>
    {% for task_preview_name,task_preview_length in preview %}
    <p class="planning__task">{{task_preview_name | title}}: {{task_preview_length}} {{ "hours" if task_preview_length > 1 else "hour"}}</p>
    {% endfor %}
{% else %}

    <h3 class="planning__date">No tasks for tomorrow.</h3>

{% endif %}
</section>
{% endblock content %}